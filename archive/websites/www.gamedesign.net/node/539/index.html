
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>Making New Buttons for Your MOD - RUST | Gamedesign.net</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
		<!-- NEED TO ADD META TAGS -->
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<base href="http://www.gamedesign.net/" />
<style type="text/css" media="all">@import "http://assets.aq2world.com/archive/websites/www.gamedesign.net/drupal.css";</style>				<link type="text/css" rel="stylesheet" href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/rusted.css" />
	</head>
	<body >
		<!-- tf bar -->
		
		<!-- masthead -->
		<table cellspacing="0" cellpadding="0" width="100%">
		<tr><td height="88" id="masthead" colspan="5"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/mh_top.jpg" width="760" height="88" /></td></tr><tr><td colspan="5"><div id="navigation">
				<div id="horz_ad">
				<iframe border="0" 
width="728" 
height="90" 
marginwidth="0" 
marginheight="0" 
frameborder="0" 
bordercolor="#000000" 
scrolling="no" 
src="http://banner.telefragged.com/telefragged/default.html"> 
</iframe> 
				<!--<img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/horz_ad.jpg" width="728" height="92" />--></div>
					<div id="searchbox">
						 <form action="search" method="post">
						 	 <table border="0" cellpadding="0" cellspacing="0"><tr><td valign="bottom"><input id="bawx" type="text" size="15" value="" name="keys" /> <input class="form-submit" type="image" src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/search_btn.jpg" alt="Search Rust" value="Search" /></td></tr></table>
						 </form>
					</div>
				<div id="navlinks" align="center">
					<a href="" title="Return to the main page.">Home</a> | <a href="book" title="Read and contribute to the collaborative books.">Books</a> | <a href="poll" title="View the list of polls on this site.">Polls</a> | <a href="search" title="Search for older content.">Search</a>				| <a href="http://forums.gamedesign.net/">RUST Forums</a></div>
			</div>
			</td>
		</tr>
		<!-- site content -->
		<tr>
			<td valign="top" width="7"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
			<td valign="top" id="left-bar" valign="top" width="192">
				<div class="block block-book" id="block-book-0">
<h2>Half-Life</h2>
<div class="block-content"><ul><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/34">FAQ</a></li><li class="collapsed"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/36">Updates</a></li><li class="collapsed"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/929">Half-Life 1 Mod List</a></li><li class="collapsed"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/33">Entity Properties</a></li><li class="expanded"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/35">Half-Life 1 Tutorials</a><ul><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/194">Big Block Method of Error Finding</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/3">Chairs, Scientists and Barneys</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/290">Code Locks</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/831">Creating an Overview</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/9">Creating Environment Maps With Terragen</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/6">Creating Proximity Doors</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/5">Customizing the lights.rad File</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/596">Dimensions</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/8">How to Make a Sphere in Worldcraft</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/196">How to make respawnable glass</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/4">Making a Custom Console Background</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/539" class="active">Making New Buttons for Your MOD</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1046">R_speeds</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/541">Sentry continued: adding Sentry-parts box and hud-icon</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/538">Sentry Tutorial</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/558">Skies</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/613">Skies (2)</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/687">Sprites</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/7">Taming the Speaker Entity</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/267">The BSP Process and Visibility</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/303">Ways to Prevent Leaks</a></li><li class="collapsed"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/628">WorldCraft/Hammer 3.4 Editing</a></li></ul></li><li class="collapsed"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1084">Day of Defeat Tutorials</a></li><li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1023">Modelling</a></li></ul></div>
</div><div class="block block-user" id="block-user-0">
<h2>User login</h2>
<div class="block-content"><form action="user/login" method="post">
<div class="user-login-block">
<input type="hidden" name="edit[destination]" value="node/539" />
<div class="form-item">
 <label for="edit-name">Username:</label><br />
 <input type="text" maxlength="64" class="form-text" name="edit[name]" id="edit-name" size="15" value="" />
</div>
<div class="form-item">
 <label for="edit-pass">Password:</label><br />
 <input type="password" class="form-password" maxlength="64" name="edit[pass]" id="edit-pass" size="15" value="" />
</div>
<input type="submit" class="form-submit" name="op" value="Log in"  />
</div>

</form>
<div class="item-list"><ul><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/register" title="Create a new user account.">Create new account</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/password" title="Request new password via e-mail.">Request new password</a></li></ul></div></div>
</div><div class="block block-user" id="block-user-1">
<h2>Navigation</h2>
<div class="block-content"><div class="menu">
<ul>
<li class="collapsed"><a href="node" title="">Content</a></li>
<li class="leaf"><a href="tracker" title="">Recent Posts</a></li>

</ul>
</div></div>
</div><div class="block block-poll" id="block-poll-0">
<h2>Poll</h2>
<div class="block-content"><div class="poll"><div class="title">I downloaded the ETQW demo and....</div><div class="text">...I'm too busy playing for polls.</div><div class="bar"><div style="width: 13%;" class="foreground"></div></div><div class="percent">13%</div><div class="text">...it's awesome.</div><div class="bar"><div style="width: 50%;" class="foreground"></div></div><div class="percent">50%</div><div class="text">...it's okay, I expected better.</div><div class="bar"><div style="width: 13%;" class="foreground"></div></div><div class="percent">13%</div><div class="text">...I'm lost in the valley, anyone have a map?</div><div class="bar"><div style="width: 0%;" class="foreground"></div></div><div class="percent">0%</div><div class="text">...my machine won't run it. :-(</div><div class="bar"><div style="width: 25%;" class="foreground"></div></div><div class="percent">25%</div><div class="total">Total votes: 8</div></div><div class="links"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/login">login</a> or <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/register">register</a> to post comments | <a href="poll" title="View the list of polls on this site.">older polls</a></div></div>
</div><div class="block block-blog" id="block-blog-0">
<h2>Recent blog posts</h2>
<div class="block-content"><div class="item-list"><ul><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2385">mekiboz.cn</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2384">vcgaxwbyrc</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2383">xvsdhqrunq</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2382">ewxbjpeaap</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2381">xwhycbtrdp</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2380">zdbvhtebfu</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2379">dfgufxbqwj</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2378">qhyuadsjwb</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2377">fwrydspuvn</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/2376">cxwugcwhgl</a></li></ul></div><div class="more-link"><a href="blog" title="Read the latest blog entries.">more</a></div></div>
</div><div class="block block-user" id="block-user-2">
<h2>Who's new</h2>
<div class="block-content"><div class="item-list"><ul><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/8457" title="View user profile.">x465735</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/8456" title="View user profile.">Fordghjk</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/8455" title="View user profile.">x0ef4b1</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/8454" title="View user profile.">ttsyu</a></li><li><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/8453" title="View user profile.">x759eb7</a></li></ul></div></div>
</div><div class="block block-user" id="block-user-3">
<h2>Who's online</h2>
<div class="block-content">There are currently 0 users and 18 guests online.</div>
</div>				<img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="192" height="1" />
			</td>
			<td valign="top" width="7"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
			<td valign="top" id="content">
				<h1>Welcome to RUST | Gamedesign.net</h1>
				<!-- inner content -->
				<table cellpadding="0" cellspacing="0" border="0">
					<tr>
						<td valign="top"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
						<td valign="top">
							<div class="body">
								<h1>Making New Buttons for Your MOD</h1>
								<div id="breadcrumb"><div class="breadcrumb"><a href="">Home</a> &raquo; <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/921" title="">Half-Life</a> &raquo; <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/35">Half-Life 1 Tutorials</a></div></div>																								<!-- begin content --><div class="node">

<div class="node-content">
<div class="info">Submitted by <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/95" title="View user profile.">Cheesemonster</a> on Thu, 2004-08-12 22:13.</div>
<!--
by Cheesemonster (http://rcbot.bots-united.com/emailuser.php?u=1) 2004 
Updated to  XHTML FEB 05 - Andy
-->
<h3>Half-Life</h3>
<blockquote>
<span style="font-weight: bold">Making New Buttons for Your MOD</span> by <a href="http://rcbot.bots-united.com/emailuser.php?u=1">Cheesemonster</a> .
</blockquote>
<h3>Introduction</h3>
<p>
Allows you to add custom buttons to your MOD
</p>
<hr />

<h3>Step 1: open file input.cpp</h3>
<p>
you need to first create a variable, typically global to the file which is a "kbutton_t"
</p>
<p>
you'll find a lot of these declared at once in input.cpp, so add something like:
</p>
<span style="color: #ff0000">
<pre>
kbutton_t in_my_new_button;
</pre>
</span>
<p>
Or whatever you want to call it :p
</p>
<h3>Step 2: Specify the Command you want to use</h3>
<p>
Each button has a command, e.g. attack has +attack as a console command
</p>
<p>
You need to create a command in console from it as well, you can do this by using pfnAddCommand()
</p>
<p>
Although first you need to make a function which just makes the key down or up (pressed or released)
</p>
<p>
So you need to make TWO functions and TWO pfnAddCommand statements. Have a look...
</p>
<span style="color: #ff0000">
<pre>
// pressed button
void IN_My_New_Button_Down(void)
{
      KeyDown( &amp;in_my_new_button );
}

// released button
void IN_My_New_Button_Up(void)
{
      KeyUp( &amp;in_my_new_button );
}
</pre>
</span>
<p>
There is also a place in input.cpp where a lot of pfnAddCommand()'s are made. Add your commands there.
</p>
<p>
you need to specify the command you want it to be and the name of the function which deals with it that you just made above. For example:
</p>
<span style="color: #ff0000">
<pre>
      gEngfuncs.pfnAddCommand ("+my_button", IN_My_New_Button_Down);
      gEngfuncs.pfnAddCommand ("-my_button", IN_My_New_Button_Up);
</pre>
</span>
<p>
remember your button whatever you want.
</p>
<h3>Step 3: Giving the button an ID</h3>
 <p>
Each button has a cont=stant identification to know what buttons are pressed. e.g. Attack has the constant IN_ATTACK, we want to make our own.
</p>
<p>
Now you should make a new bit for your button that will work with 'pev->button' in entvars.
</p>
<p>
Define it in input.h, as follows:
</p>
<span style="color: #ff0000">
<pre>
#define IN_MY_NEW_BUTTON (1&lt;&lt;16)
</pre>
</span>
<h3>Step 4: Check if button is pressed</h3>
 <p>
That's your new button's bit mask set that you can check in game if it is pressed.
</p>
<p>
Now you've done that you can go down into the CL_ButtonBits() function. Like this:
</p>
<span style="color: #ff0000">
<pre>
int CL_ButtonBits( int bResetState )
</pre>
</span>
<p>
Add some new code to add your new bitmask to the bits pressed when your button in_my_new_button's state is 3 (i Think!)
</p>
<p>
Here is an example:
</p>
<span style="color: #ff0000">
<pre>
      if ( in_my_new_button.state &amp; 3 )
      {
            bits |= IN_MY_NEW_BUTTON;
      }
</pre>
</span>
<h3>Step 5: Resetting the button State</h3>
<p>
You also have to add the button when your resetting the state at the bottom of the function.. where it has all of this stuff..
</p>
<span style="color: #ff0000">
<pre>
      if ( bResetState )
      {
            in_attack.state &amp;= ~2;
            in_duck.state &amp;= ~2;
               ...
               ...
        }
</pre>
</span>
<p>
so now just add..
</p>
<span style="color: #ff0000">
<pre>
in_my_new_button.state &amp;= ~2;
</pre>
</span>
<h3>Finished</h3>
<p>
That's it. You have just codified your first button in Half-life. Congratulation!!!
</p>
<!--EOF@141--><div class="book"><div class="nav"> <div class="links"><div class="prev"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/4" title="View the previous page.">previous</a></div><div class="next"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1084" title="View the next page.">next</a></div><div class="up"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/35" title="View this page's parent section.">up</a></div></div> <div class="titles"><div class="prev">Making a Custom Console Background</div><div class="next">Day of Defeat Tutorials</div></div></div></div></div>

<div class="links"><a href="book/print/539" title="Show a printer-friendly version of this book page and its sub-pages.">printer-friendly version</a> | <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/login">login</a> or <a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/user/register">register</a> to post comments</div>
</div><!-- end content -->							</div>
							<div id="body-spring">RUST | Gamedesign.net is your source for all the latest game-editing news and tutorials. If you are seeing this message, this means that you are using a browser that does not support CSS. Please upgrade your browser and enjoy your stay at RUST and if you have any questions, comments, or suggestions, please contact a site administrator.</div>
							</td>
						<td valign="top"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
						<td valign="top" width="160"><div id="right-bar"><div class="block block-menu" id="block-menu-153">
<h2>Editing Handbooks</h2>
<div class="block-content"><div class="menu">
<ul>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/532" title="">3D Modeling</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/167" title="">Doom 3</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/111" title="">Game/Map Design</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/921" title="">Half-Life</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/663" title="">Half-Life 2</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/128" title="">Kingpin</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1147" title="">Quake 4</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/11" title="">Quake II</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/12" title="">Quake III Arena</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/813" title="">Warcraft III</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/708" title="">Interviews</a></li>

</ul>
</div></div>
</div><div class="block block-menu" id="block-menu-337">
<h2>About Us</h2>
<div class="block-content"><div class="menu">
<ul>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/1034" title="">Staff Resume's</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/726" title="">Design Resume's</a></li>
<li class="leaf"><a href="http://assets.aq2world.com/archive/websites/www.gamedesign.net/node/759" title="">Resume Template</a></li>

</ul>
</div></div>
</div><div class="block block-block" id="block-block-1">
<h2>Advertisement</h2>
<div class="block-content"><div align="center"><!-- <img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/vert_ad.jpg" border="1" width="120" height="600" /> -->
<iframe border="0" 
width="120" 
height="600" 
marginwidth="0" 
marginheight="0" 
frameborder="0" 
bordercolor="#000000" 
scrolling="no" 
src="http://banner.telefragged.com/telefragged/default600.html"> 
</iframe> 
</div></div>
</div></div><br /><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="160" height="1" /></td>
						<td valign="top"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
					</tr>
				</table>
 			</td>
			<td valign="top" width="7"><img src="http://assets.aq2world.com/archive/websites/www.gamedesign.net/themes/rusted/images/spacer.gif" width="7" height="1" /></td>
		</tr>
		<tr><td valign="top" height="7" colspan="5"></td></tr>
		<!-- footer -->
		<tr>
			<td valign="top" id="footer" colspan="5">&copy; 2005 <strong><a href="/">RUST | Gamedesign.net</a></strong>. Site design by <a href="http://www.bleasedesign.com/">Jherax</a> with modifications by <a href="http://crockatt.computed.net/portfolio/mainFrame.htm">Skinmaster</a>.</td>
		</tr>
		</table>
		 	</body>
</html>
